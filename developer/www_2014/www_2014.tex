\documentclass{sig-alternate}
%\documentclass{acm_proc_article-sp}
\usepackage{graphicx}
\usepackage{url}
\usepackage{paralist}
\usepackage{listings}
\usepackage{caption}
\usepackage{ntabbing}
\usepackage{tikz}
\usetikzlibrary{trees}

% \DeclareUnicodeCharacter{B1}{\pm}
%% LANGUAGE      Markup definitions
\def\lstxml{
  \lstset{language=XML,
    keywordstyle=\ttfamily,
    identifierstyle=\ttfamily\bfseries, 
    % commentstyle=\color{Brown},
    stringstyle=\ttfamily,
    showstringspaces=false,
    columns=[l]flexible, %% , basewidth={0.5em,0.4em}
    escapeinside={(@*}{*@)},
    morekeywords={encoding,
      mrow,math,mfrac,mi,msqrt,mo,mn,span,nobr,img}
  }
}

\def\lstjs{
  \lstset{language=Java,
    keywordstyle=\ttfamily,
    identifierstyle=\ttfamily\bfseries, 
    % commentstyle=\color{Brown},
    stringstyle=\ttfamily,
    showstringspaces=false,
    columns=[l]flexible, %% , basewidth={0.5em,0.4em}
    morekeywords={cvox,Api,Math,defineRule}
  }
}

\def\lsttex{
  \lstset{language={[LaTeX]TeX},
    texcsstyle=*\bfseries,
    keywordstyle=\ttfamily,
    identifierstyle=\ttfamily\bfseries, 
    % commentstyle=\color{Brown},
    stringstyle=\ttfamily,
    showstringspaces=false,
    columns=[l]flexible, %% , basewidth={0.5em,0.4em}
    moretexcs=intertext,
    morekeywords={sum,Sigma}
  }
}

\newcommand\ednote[1]{\typeout{There is still a note!!!}%
  {\bf EDNOTE: #1}}

\newcommand\edbf[1]{\typeout{There is still an editor's note!!!}%
  \textbf{EDNOTE: #1}}


\begin{document}
\title{Accessibility to Scientific Material:\\ The Case of Speaking Math}
\numberofauthors{2} %  in this sample file, there are a *total*

\author{
% You can go ahead and credit any number of authors here,
% e.g. one 'row of three' or two rows (consisting of one row of three
% and a second row of one, two or three).
%
% The command \alignauthor (no curly braces needed) should
% precede each author name, affiliation/snail-mail address and
% e-mail address. Additionally, tag each line of
% affiliation/address with \affaddr, and tag the
% e-mail address with \email.
%
% 1st. author
  \alignauthor Volker Sorge\titlenote{This work was done while the author spent a
    sabbatical at Google,
    Inc., Mountain View, CA, USA.}\\
  \affaddr{School of Computer Science}\\
  \affaddr{The University of Birmingham, UK}\\
  \email{V.Sorge@cs.bham.ac.uk}
% 2nd. author
\alignauthor
Charles Chen, T.V. Raman, David Tseng\\
       \affaddr{Google, Inc.}\\
       \affaddr{Mountain View, CA, USA}\\
       \email{\{clchen|raman|dtseng\}@google.com}
}


\maketitle 
\begin{abstract} 
  As the traditional methods of publishing and teaching in the
  STEM subjects are being progressively replaced by the provision
  of web-based content, ensuring full accessibility to this
  material for visually impaired users is of paramount importance
  for inclusive education. The text to speech translation of
  content for which well defined markup languages exists such as
  mathematics is a non-trivial problem. In this paper we present
  our efforts of making the speech translation of mathematical
  formulas a first class citizen in a general screen reader. We
  describe the ChromeVox screen reader and demonstrate how its
  features enable us to provide text to speech translation for
  web-based mathematical content. These features allow us to
  translate formulas given in a variety of formats into uniform
  spoken utterances exploiting ChromeVox's ability to handle
  alternative representations of DOM elements. This also allows
  us to customize aural rendering of mathematics both by using
  semantically enriched representations and employing flexible
  and adaptable speech rules. To further aid understanding of the
  math we exploit ChromeVox's idea of letting users engage with
  content on different levels of granularity to enable
  interactive exploration of complex mathematical formulas.
\end{abstract}
\category{H.5.2}{User Interfaces}{Voice I/O}
%A category including the fourth, optional field follows...
\category{H.5.4}{Hypertext}{Navigation, User Issues}

% \terms{}

\keywords{screen reader, mathematics, ChromeVox}

\section{Introduction}\label{sec:intro} As we move away from the traditional
methods of publishing and teaching to the provision of web-based content, more
and more scientific literature and teaching material in the STEM subjects
becomes available online. This material can range from traditional articles
containing mathematical formulas and scientific diagrams to highly interactive
web pages often exploiting novel media formats such as dynamic diagrams or
simulations. Ensuring full accessibility to this material for users that rely
primarily on voice output from their computer becomes a challenging
problem. Already the text to speech translation of fairly conventional
scientific content like mathematical formulas, which contain rich structure and
for which a well defined markup language exists, is non-trivial.


\ednote{Some related work here.}

In this paper we report on our effort to integrate the basic support
for voicing mathematical content on the web into the ChromeVox screen
reader. 



As an example we consider the quadratic formula:
\begin{equation}
  \label{eq:quadratic}
  x=\frac{-b \pm \sqrt {b^2-4ac}}{2a}
\end{equation}


We shall present some of the main challenges to making maths
on the web accessible, where it is given in a variety of ways and
formats. We shall outline the rule based approach we have pursued and
how it fits with ChromeVox's philosophy to enable users to explore
content at different levels of granularity. It has led to an
implementation of a flexible speech rule engine that allows to
customize the reading experience along several axes and that also
provides an API for easy adaptation to specialized content by users
and web site authors.
\newpage

\section{Mathematics on the Web}
\label{sec:math}

Mathematical formulas on web pages can be represented in their own specialized
markup language, MathML~\cite{MathML3}. But although MathML is officially part
of the HTML5 standard~\cite{HTML5}, not all major browsers also implement MathML
rendering, hence support displaying formulas included in pure MathML on web
pages is sketchy. Consequently in reality mathematics on the web comes in a
variety of flavors. One can identify predominant three ways in which
mathematical content is currently given on the web:
\begin{enumerate}
\item Pure MathML markup: this relies on the user viewing the
  page with a browser that renders MathML.
\item Rendered with MathJax: the web page author ensures that mathematical
  content is rendered client-side independent of the user's browser by including
  the third party MathJax library in the page. Formulas can be given in several
  different markup languages.  and relying on the third party that renders
  mathematical content client side.
\item Pre-rendered images: Content is ensured to display correctly, by including
  images of formulas in the web page. The original markup from which the content
  was originally rendered is often given in an attribute of the image tag.
\end{enumerate}

In order to enable access to the majority of mathematics that can be found on
the web today, one has to provide text-to-speech support for all of the above
formats, which we shall briefly sketch the remainder of this section.

\subsection{MathML}
\label{sec:mathml}

MathML is a specialized markup language that was developed with the expressive
purpose of representing mathematics. Ordinarily it comes in two flavors:
presentation MathML and content MathML. The former is a markup language geared
towards adequately displaying mathematical formulas thus playing a role of web
documents similar to the one of {\LaTeX} for printed documents.  Contrary,
content MathML aims to serve also as a meaningful exchange format between
mathematical software systems by providing markup that allows to express
semantic meaning of mathematical expressions. As there is still very little
support for content MathML we concentrate here on presentation MathML only.
  
\begin{figure}[t!]
  \begin{center}
    \leavevmode
    \lstxml\small
\begin{lstlisting}
<math xmlns="http://www.w3.org/1998/Math/MathML">
  <mstyle displaystyle="true">
    <mi>x</mi>
    <mo>=</mo>
    <mfrac>
      <mrow>
        <mo>&#x2212;</mo>
        <mi>b</mi>
        <mo>&#x00B1;</mo>
        <msqrt>
          <msup>
            <mi>b</mi>
            <mn>2</mn>
          </msup>
          <mo>&#x2212;</mo>
          <mn>4</mn>
          <mi>a</mi>
          <mi>c</mi>
        </msqrt>
      </mrow>
      <mrow>
        <mn>2</mn>
        <mi>a</mi>
      </mrow>
    </mfrac>
  </mstyle>
</math>
\end{lstlisting}
    \caption{MathML representations of~\ref{eq:quadratic}.}
    \label{fig:quadratic-mml}
  \end{center}
\end{figure}

Presentation MathML provides markup for the most common layout elements
encountered in mathematics, such as sub- and superscripts, fractions, square
roots etc.  In addition it provides markup to define mathematics specific styles
or spacing, as well as specialised attributes such as for fonts, accents, etc.
Fig.~\ref{fig:quadratic-mml} presents our example the quadratic
formula~\ref{eq:quadratic} in MathML markup. Here the tags \texttt{mi},
\texttt{mn}, and \texttt{mo} markup identifiers, number, and operators,
respectively, while layout elements fraction, square root and superscript are
enclosed in the elements \texttt{mfrac}, \texttt{msqrt}, and \texttt{msup}. The
\texttt{mrow} tag allows the horizontal combination of a string of elements, in
case they need to be combined to a single node as in the case of the two
arguments for the fraction tag \texttt{mfrac}.

MathML is part of the specification for the HTML5 standard~\cite{HTML5}, where
it lives in its own name space. By extension it is also part of the ePub3
standard~\cite{epub3} and consequently one can anticipate that future
implementations of these standards with include native rendering of MathML
content. However, in the current situation only few browsers and epub readers
support MathML and rendering is either achieved by specialist browser plugins or
by third party libraries.


\subsection{MathJax Rendering}
\label{sec:mathjax}

MathJax is a JavaScript display engine~\cite{MathJax2.2} that consistently
renders mathematical expressions in all browsers. It handles a number of input
formats and translates them into simple HTML markup that visually renders a math
expression in a browser, regardless of whether it supports MathML.  Thus the
basic goal is to shift control on whether and how formulas are displayed to the
content author, by allowing them to include JavaScript in web pages that calls
MathJax via a content distribution network to enable client side rendering of
math expressions.

\begin{figure*}[t!]
%\begin{minipage}[t!]{\textwidth}
  \begin{center}
    \leavevmode
    \lstxml\small
    \lstinputlisting{mathjax.xml}
%    \captionof{figure}{MathJax representations of~\ref{eq:quadratic} from
    \caption{MathJax representations of~\ref{eq:quadratic} from
      \protect\url{en.wikipedia.org/wiki/Quadratic_equation}.}
    \label{fig:quadratic-mj}
    \leavevmode
    \lstxml\small
\begin{lstlisting}
<img class="tex" 
      alt="x=\frac{-b \pm \sqrt {b^2-4ac}}{2a}" 
      src="//upload.wikimedia.org/math/3/c/a/3ca857f705daba6b9e6e6d3ccad7990f.png" />
\end{lstlisting}
\caption{Image markup for~\ref{eq:quadratic} from 
  \protect\url{en.wikipedia.org/wiki/Quadratic_equation}.}
\label{fig:quadratic-img}
  \end{center}
\end{figure*}

An authors can then include formulas directly into a web page either as MathML
markup or as {\LaTeX} or AsciiMath~\cite{asciimath}. During the rendering
process MathJax replaces this markup with HTML elements that explicitly specify
vertical and horizontal spacing, drawing of lines and special elements such as
radices, and placement of character in web fonts.  This has not only the
advantage that the generated markup is portable between browsers, but also that
expressions rendered with MathJax are fully scalable.  But since the rendered
expressions that MathJax injects into the DOM is primarily aimed at visual
display, it is a less straightforward translation of the mathematical expression
it models.

As an example Fig.~\ref{fig:quadratic-mj} shows part of the MathJax markup for
equation~\ref{eq:quadratic}. While it is clearly more cluttered than its MathML
counterpart in Fig.~\ref{fig:quadratic-mml}, there are nevertheless some obvious
resemblances. The expression effectively consists of two types of \texttt{span}
elements:
\begin{inparaenum}[(a)]
\item Those with a single style attribute that are exclusively display elements.
\item Those with a additional class attributes and id that generally mirror the
  composition of the corresponding MathML expression.
\end{inparaenum}
As we can observe in our example, the latter type of elements maintains the
structure of the MathML expression, and this regardless of the original source
of the formula. Indeed MathJax always maintains an internal MathML
representation of a mathematical formula, even if translated from {\LaTeX} or
AsciiMath, a fact that we shall exploit in Sec.~\ref{sec:alternative}.


\subsection{Hidden Markup}\label{sec:images}

Traditionally mathematical formulas would be embedded into web content using
images generated from documents that were previously generated with systems
specializing on rendering mathematics, for example, {\LaTeX}. And despite the
obvious drawbacks of having content in images, such as lack of scalability, this
method is still an option that is chosen by many major web sites containing
mathematical content (e.g., Wikipedia~\cite{wikipedia},
MathWorld~\cite{mathworld}), to provide content consistently at reliable
performance, independent of third party libraries.  While the mathematics given
in image form is effectively inaccessible, the original source from which a
formula has been generated is often given in form of alternative text attribute
of the image tag.  For instance, in the case of Wikipedia, most of the
mathematics images have alternative text provided in \LaTeX, whereas MathWorld
contains AsciiMath markup.  The case of our example is given in
Fig.~\ref{fig:quadratic-img} the quadratic equation is loaded as a PNG images,
while the hidden markup is given in the original \LaTeX
\verb+x=\frac{-b \pm \sqrt {b^2-4ac}}{2a}+


This form of hidden markup can then be displayed in
text-only browsers or used for copy-and-paste operations. 
In ChromeVox we exploit hidden markup as well, to ensure a consistent
screen reading experience of all mathematical content on the web.  In particular,
we rely on the MathJax library to translate hidden markup into a MathML
representation that we can speak instead. We describe in detail the treatment of
alternative representations in Sec.~\ref{sec:alternative}.




\section{ChromeVox}
\label{sec:chromevox}

ChromeVox is a screenreader that has been built with the aim to make rich web
applications accessible to visually impaired users. ChromeVox runs inside the
Chrome browser where it can be installed as an extension and it is the default
screenreader for Chrome OS. Therefore, it uses exclusively the HTML document
object model (DOM) to communicate with web applications without the need to user
an accessibility API provided by the underlying operating system.

With the advancements of the web programming model and in particular the ease
with which complex interaction layers can be build using HTML, CSS and
JavaScript web pages do no longer just contain but resemble fully fledged
applications more akin to traditional desktop programs. As a consequence
traditional linear navigation is no longer sufficient to allow users to explore
and comprehend web content in a reasonable way.

ChromeVox aims to support effective navigation of complex web content by giving
the user the means to engage with content on multiple layers. This is
implemented via an architecture that makes it possible to customize the screen
readers behavior along four axes which allows to adapt the screenreader
flexibly to specialized content. In detail ChromeVox can be parameterized by 
\begin{enumerate}[(1)]
\item segmenting the DOM into different \emph{granularities},
\item enabling different ways of interactively \emph{walking content},
\item customizing content description by parameterizing \emph{speech output},
\item enabling efficient navigation by allowing the use of \emph{alternative
    representations} for DOM elements.
\end{enumerate}
In the remainder of this section we will explain these four axes in more detail.


\subsection{Axis 1: Granularities}
\label{sec:ax1}

Granularities are the primary means to allow a user to engage with content at
their choice of detail. The main purpose of a granularity is to segment the DOM
into units between which the user can navigate interactively.

In practice, a granularity defines what is regarded as a leaf node in the
DOM. Fig.~\ref{fig:granularity} schematically depicts the idea of different
granularities. The content of the leaf node is then the smallest chunk that is
translated into an utterance and sent to the TTS.

\begin{figure}[ht!]
  \begin{center}
    \leavevmode
    \includegraphics[width=.4\columnwidth]{images/granularity1}
    \includegraphics[width=.4\columnwidth]{images/granularity2}
    \caption{Schematic depiction of granularities.}
    \label{fig:granularity}
  \end{center}
\end{figure}

While granularities are generally structured from coarse grained to more fine
grained, this does not imply that they have to be strictly hierarchical. For
example, in text natural granularities are line, word or character. On the other
hand in more specialized content like a table one could distinguish
granularities like row, column, or cell, where the latter again can be segmented
by normal text granularities.  Defining granularities is therefore not
necessarily a simple task in particular due to often heavily nesting of layout
elements in rich web applications.\ednote{Does that make sense?}


\subsection{Axis 2: Walking Content}
\label{sec:ax2}

Interactive navigation of content is accomplished by walkers.  They provide a
means to move between the different leaf nodes defined by a particular
granularity. They also offer the flexibility to break up the linear order of
navigating content as well as ignore certain leafs nodes. Fig.~\ref{fig:walkers} gives
an idea of different walkers operating on the same level of granularity.

The flexibility of the walkers is particular important to allow for a good user
experience on complex web content, where the ideal reading order is not
reflected by the order of the elements in the DOM. An example is the
\url{google.com} search page, which can contain in addition to the normal search
results additional information in the form of a knowledge card on the right or
timely information on the top (e.g., sports results). However, in the DOM the
knowledge card is given after all the search results, thus conventional linear
navigation would force the user to navigate through the entire list of search
results first before discovering the knowledge card.\ednote{Is that a good
  example?}

\begin{figure}[ht!]
  \begin{center}
    \leavevmode
    \includegraphics[width=.4\columnwidth]{images/walker1}
    \includegraphics[width=.4\columnwidth]{images/walker2}
    \caption{Schematic depiction of different walkers.}
    \label{fig:walkers}
  \end{center}
\end{figure}

In practice walkers and granularities are exposed to the user in meaningful
combinations only. Walkers usually group related granularities, whenever
possible in a hierarchical nature.  A user can not only switch explicitly
between levels of granularity but interactively walk at one level of
granularity, while if necessary exploring the currently active leaf node at the
next lower level of granularity.

For example, in default text walking mode granularities include line, word and
character. The user can either switch between these granularities, or while
walking the text linearly, for instance, in line granularity --- usually with up
and down arrow keys\footnote{These keys depend on the particular choice of
  keymap and possible user customization.}  --- explore the content of the line
that currently being read word for word using the left and right arrow keys.

Immediate keyboard shortcuts can be given to particular combinations of walker
and granularity. A particular example is the exploration of hyperlinks in a
document to which ChromeVox dedicates two keys explicitly for walking links
only, while ignoring all interspersed text.

\subsection{Axis 3: Speech Output}
\label{sec:ax3}

The third axis along which ChromeVox is customizable is how speech output is
generated. While the way regular text is read is determined by the TTS engine
employed and thus can not be influenced by ChromeVox directly, when conveying
additional information on content as well as while reading specialized content
flexibility on how elements are spoken or announced is important.

For example, ChromeVox can provide the user with context information on
particular elements, such as announcing the type of headers, whether a hyperlink
is contained etc., by announcing the element explicitly or playing
earcons. Simple adaptations of this behavior allows for changes
\begin{inparaenum}[(a)]
\item to the level of verbosity,
\item if and how punctuation is being read,
\item to switch earcons on or off.
\end{inparaenum}

More complex structures can benefit from even more sophisticated customization.
For instance, when traversing tables ChromeVox can give the user information on
the current position in the table, for example, by announcing explicitly row and
column number or the cell type. Similarly, when speaking mathematics can become
necessary to alter the pronunciation of elements or entire formulas according to
mathematical subject area or user preference.

For this purpose ChromeVox has a dedicated speech rule engine that allows to
specify speech rules for particular DOM element. If a walker traverses a DOM
element for which a speech rule exists, it is used to generate speech
output. This can be a recursive process in the sense the execution of one speech
rule might trigger further speech rules that apply to its sub-elements.
Customization is realized by defining different rules for elements and
parameterizing the engine swapping entire rule sets thus changing the generated
speech output.

As ChromeVox's speech rule engine has been designed originally in the context of
our work on making mathematics accessible and we shall present more details on
its operation and rule systems in Sec.~\ref{sec:translate}. However, the speech
rule engine has now been integrated as a general component into the screen
reader and can be employed to customize reading of any element in the DOM. In
fact, it is implemented in a general enough way that it allows to define and
recursively execute speech rules for any XML object, a fact that we can put to
use when working with alternative representations of DOM objects.


\subsection{Axis 4: Alternative Representations}
\label{sec:ax4}


The final axis of customization is ChromeVox's ability to swap entire elements
in the DOM for alternative representations. However, as we do not want to alter
the actual DOM, we achieve this by internally mapping particular leaf node to
dedicated representations. This idea is schematically depicted in
Fig.~\ref{fig:alt}.

\begin{figure}[ht!]
  \begin{center}
    \leavevmode
    \includegraphics[width=.5\columnwidth]{images/substructure1}
    \caption{Schematic depiction of alternative representations.}
    \label{fig:alt}
  \end{center}
\end{figure}

We effectively allow any data structure as a valid alternative representation as
long as it is serializable into an XML representation. This allows us to define
bespoke speech rules for a the resulting XML object and compile appropriate
speech output using the speech rule engine. Depending on the nature of the DOM
element to be replaced alternative representations are either precomputed at
load time of a webpage or generated on the fly when the particular DOM object is
visited.

Employing alternative representations can be particularly beneficial when the
original DOM element is not suitable for speech generation or when a more
dedicated data structure can give lead to a better understanding of the content
for the user. Its use can either be triggered automatically, or explicitly by a
user command. In fact, this ability plays a crucial role in the accessibility of
mathematical content and we describe it in more detail in
Sec.~\ref{sec:alternative}.


\section{Speaking Mathematics}
\label{sec:translate}

The speech translation of mathematics poses some unique difficulties which makes
it generally a more challenging task for a screen reader than the aural
rendering of text. When for regular text it is generally enough to identify what
needs to be spoken possibly together with the language it is in, and let a TTS
engines take care of deciding how the text is voiced by adding appropriate
prosody etc., for mathematical expressions much of the heavy lifting has to be
done by the screen reader by translating formulas into an utterance the ensures
that TTS, which is normally geared towards speaking continuous text, voices them
appropriately.

\begin{itemize}
\item Mathematical notation uses a much wider spectrum of symbols than ordinary
  text, most of which have to be translated by the screen reader into a
  meaningful expression before sending it to the TTS.
\item Punctuation is often crucial for the understanding of a formula. Thus
  symbols like periods, commata, and parentheses either have to be pronounced
  explicitly or modeled by appropriate pausing. 
\item Even white space that would normally be ignored can have meaning in a
  formula (e.g., elided operation symbols, function applications) and might need
  to be pronounced.
\item Formulas often exhibit a two dimensional layout that has to be conveyed to
  a reader, either by changes in intonation or by making explicit announcements.
  Furthermore, formulas can be nested arbitrarily deep, adding the need to
  communicate that complexity.
\item There is no standardized mathematical language or dictionary that allows
  us to retrieve the proper pronounciation of symbols or entire
  expressions. Moreover, their meaning can vary across different mathematical
  domains.
\end{itemize}

We tackle this challenges by providing a simple, yet powerful enough rule
language to translate both single symbols and complex expressions, that
futhermore be specialised with respect to mathematical domains and user
preferences.

\subsection{Describing Math via Speech Rules}

\newcommand{\srule}[2]{\ensuremath{#1 \rightarrow #2}}
\newcommand{\slist}[1]{\ensuremath{#1}}
\newcommand{\ttrule}[2]{
  
  \noindent\centerline{\texttt{#1}$\rightarrow$\texttt{#2}}}
\newcommand{\tttrule}[2]{

  \noindent
  \texttt{#1}\newline\hspace*{\fill}$\longrightarrow$\texttt{#2}}

The primary means to translate mathematical expressions is the speech rule
engine describe in Sec.~\ref{sec:ax3}. In fact the engine and its rule language
was originally defined in the context of speaking mathematical expressions.

The basic structure of a rule is that of a \emph{condition/action pair}, where
the condition decides on the applicability of a rule to a DOM element and the
action contains instructions how to construct speech output for the that DOM
element that can be passed to a TTS. More formally we define a rule as:
\[R= ({C},{A}) = \srule{\slist{c_0;\ldots;c_n}}{\slist{a_0;\ldots;a_m}} \]
where $C$ is a non-empty ordered list of \emph{Xpath expressions} and $A$ is a
non-empty ordered list of \emph{action components}.

In detail, the condition $C=\slist{c_0;\ldots;c_n}$ consists of a mandatory
element $c_0$, which is an Xpath node selector, and a set of optional $c_i,
i=1,\ldots,n$, which are Xpath predicates. The rule $R$ is applicable to a DOM
node $N$, if $c_0$ returns $N$ and all other $c_i$ hold for $N$.

The speech output for $N$ is then computed using the actions $A =
\slist{a_0;\ldots;a_m}$, where each action component $a_i, i=0,\ldots,n$
consists itself of three parts: 
\begin{description}
\item[Type] specifies how the component is treated by the speech rule engine. We
  distinguish four types of components:
  \begin{description}
  \item[Node (denoted \texttt{n})] A single node that is recursively given to
    the rule engine.
  \item[Multi (\texttt{m})] A list of nodes is passed to the engine.
  \item[Text (\texttt{t})] Content that is given directly to the TTS.
  \item[Personality (\texttt{p})] Customizes the behavior of the TTS.
  \end{description}
\item[Content] is, depending on the type of the component, either an Xpath
  expression returning a node or a list of nodes, for types \texttt{n} and
  \texttt{m}, respectively, or a string or an Xpath expression returning a
  string for type \texttt{t}.  It is empty for type \texttt{p}.
\item[Annotation] specifies additional parameters that influence the execution
  of the component or the behavior of the TTS.
\end{description}


\def\cR{{\cal R}} \def\cN{{\cal N}} \def\assign#1#2{{#1}\leftarrow{#2}} 

Given our definition of rules we can now describe the basic working of the
speech rule engine in pseudo-code. The engine is parameterised with a set of
speech rules ${\cR}={\{R_1,\ldots,R_n\}}$ and applied to a DOM node $\cN$.

\vspace{.3cm}\hrule\vspace{.2cm}
\noindent \textbf{SpeechRuleEngine}($\cR$, $\cN$)
\vspace{-.2cm}\begin{ntabbing}
  mi\=mi\=mi\=mi\=mi\=mi\=mi\=mi\=\kill
  let applicable rules $\assign{S}{\emptyset}$\label{}\\
  for each $R\in \cR$\label{}\\
  \> assume $R$ is of the form $\srule{\slist{c_0;\ldots;c_n}}{A}$\label{}\\
  \> if $c_0(N) = N$ and $c_i(N) = \mathbf{true}, i=1,\ldots,n$\label{}\\
  \>\> $\assign{S}{S\cup\{R\}}$\label{}\\
  if $S=\emptyset$\label{}\\
  \> speak text content of $\cN$\label{}\\
  else \label{}\\
  \> $\assign{R}{\mbox{pick from }S}$ \label{line:heuristic}\\
  \> assume $R$ is of the form $\srule{C}{a_0;\ldots;a_m}$\label{}\\
  \> for each $a_i, i=0,\ldots,m$\label{}\\
  \>\>case type of $a_i$ is\label{}\\
  \>\>\>n:\> $\assign{\cN'}{\mbox{apply content of } a_i}$\label{}\\
  \>\>\>\>\textbf{SpeechRuleEngine($\cR$, $\cN'$)}\label{}\\
  \>\>\>m:\> $\assign{\cN_1',\ldots,\cN_k'}{\mbox{apply content of } a_i}$\label{}\\
  \>\>\>\>for each $\cN_i', i=1,\ldots,k$\label{}\\
  \>\>\>\>\>\textbf{SpeechRuleEngine($\cR$, $\cN_i'$)}\label{}\\
  \>\>\>t:\>speak content of $a_i$\label{}\\
  \>\>\>p:\>execute annotation of $a_i$\label{}\\
\end{ntabbing}
\vspace{-.5cm}\hrule\vspace{.2cm} 

\ednote{\ldots explain a bit more \ldots mention that completeness is
  guaranteed as we always have a textcontent even if empty \ldots termination
  depends on the rules, but since xpath expressions can move along all axes,
  that can never be guaranteed.}

Note also that in line~\ref{line:heuristic} we have not fully specified how a rule
$R$ is picked from the set of all applicable rules. Here we can apply a
heuristic on rule preference, which currently defaults to the most constraint
rule in the set.

As examples of a simple rule consider the following the rule for an mi element:
\ttrule{self::mathml:mi}{[t] text()}
Here the condition simply states that the node itself has to have the tag
\texttt{mi}. As MathML has its own namespace in HTML, we have to include it as
prefix in the Xpath expression. The action of the rule has a single component of
text type, which simply returns the content of the node. Observe that we write
types in square brackets, while writing annotations in round parentheses
following the Xpath expression. Annotations can be omitted.

A rule that pronounces more than a single node

\tttrule{self::mathml:msqrt}{[t] "Square root of"; [m] ./*; [p] (pause:400)};
  


A rule with multiple constraints, square:

\tttrule{self::mathml:msup; ./*[2][text()=2]}{[n] ./*[1]; [t] "square"}

A rule with an annotation:

\tttrule{self::mathml:mfenced; string-length(string(@separators))=1}
{[t] @open; [m] ./* (separator:@separators); [t] @close}

For example applying the above rule to the MathML markup 
{\lstxml\small
\begin{lstlisting}
<math xmlns="http://www.w3.org/1998/Math/MathML">
  <mfenced open="{" close="}" separators=";">
    <mi>a</mi>
    <mi>b</mi>
    <mi>c</mi>
  </mfenced>
</math>
\end{lstlisting}}
would result in speech output for the expression $\{a;b;c\}$.


Observe that we can define rules for any node in the tree by testing its
applicability with an Xpath expression. This does not only mean that the rules
are not restricted to MathML markup, but also that we can specify translation
rules for single characters or strings. 

\ttrule{self::text(); ./text()=\&\#x00B1}{[t] "plus minus"}

\tttrule{self::span[\@class="mfrac"]}{[n] ./*[1]/*[1]/*[1]; [t] "divided by"; [n] ./*[1]/*[2]/*[1]}

and a MathJax rule for fractions



\subsection{Conveying Meaning by Intonation}

In order to convey two dimensional structures as well as nesting depth 

We 


This follows a model for pronouncing mathematical expressions first introduced
to Aster~\cite{aster}.

In particular, we allow for the variation of
\begin{inparaenum}[(1)]
\item speech pitch,
\item speech rate,
\item volume, as well as the inclusion of
\item pauses.
\end{inparaenum}
These changes can be specified in a rule as annotations to the components of the
action. Thereby we can distinguish whether an intonation change only affects a
single utterance or is recursively applied.  In the latter case multiple
recursive changes to a particular intonation parameter are summed up, thus
enabling to convey nesting depth and two dimensional structure of an
expression. For example, we can formulate the actions of the fraction rule as
follows:

\texttt{[n] ./*[1] (pitch:0.3); [t] "divided by"; [n] ./*[2] (pitch:-0.3)}

Examples from Knuth's book: 

$x+y^2\over k+1$

${x+y^2\over k}+1$

$x+{y^2\over k+1}$

$x+{y^2\over k}+1$

$x+y^{2\over k+1}$

\[ {x^2}^y = x^{2y}\]
\subsection{Customizing Rule Sets}

\begin{itemize}
\item Different type of rules
\item Example for domains
\item Example for verbose vs brief
\item API
\end{itemize}

We have implemented a basic rule sets both for the MathML as well as for 
expressions. Their idea is to serve as default rules, in absence of rules more
specialised with respect to mathematical domains or reading styles.

\edbf{To be explained\ldots}

\begin{minipage}{.4\linewidth}
  \[\frac{\varphi}{\neg\neg \varphi}\]
\end{minipage}
\begin{minipage}{.55\linewidth} {\lstxml\small
\begin{lstlisting}
<mfrac>
  <mrow>
    <mo>&#x00AC;</mo>
    <mo>&#x00AC;</mo>
    <mi>&#x03C6;</mi>
  </mrow>
  <mi>&#x03C6;</mi>
</mfrac>
\end{lstlisting}
  }
\end{minipage}



In practice the user can cycle through both mathematical domains and reading
styles to parameterize the speech rule engine. The engine is invoked whenever a
MathML (or MathJax) expression or sub-expression is encountered. When in
continuous reading mode math expressions are always spoken in their
entirety. When interacting with content in some text granularity (with the
notable exception of the character granularity), math expressions are
effectively considered as leafs, regardless of the actual granularity.


In both cases the math expression is explicitly pointed out to the user by
ChromeVox playing an earcon and, if in verbose mode, also announcing
``Math''. This is a means to alert the user not only to the existence of math in
the text but also to the possibility that they can further engage with the
expression by exploring it interactively.


\section{Engaging with Formulas}
\label{sec:explore}

\begin{figure*}[t!]
  \centering
  \tabcolsep1pt{\footnotesize
    \noindent\begin{tabular}{clclclclclcl}
      & $\framebox{$x=\frac{-b \pm \sqrt {b^2-4ac}}{2a}$}$  & $\longleftrightarrow$ 
      & $\framebox{$x$}=\frac{-b \pm \sqrt {b^2-4ac}}{2a}$  & $\longleftrightarrow$ 
      & $x\framebox{$=$}\frac{-b \pm \sqrt {b^2-4ac}}{2a}$  & $\longleftrightarrow$ 
      & $x=\framebox{$\frac{-b \pm \sqrt {b^2-4ac}}{2a}$}$  & $\longleftrightarrow$ 
      & $x=\frac{\framebox{$-b \pm \sqrt {b^2-4ac}$}}{2a}$\\
      $\longleftrightarrow$ 
      & $x=\frac{\framebox{$-$}b \pm \sqrt {b^2-4ac}}{2a}$  & $\longleftrightarrow$ 
      & $x=\frac{-\framebox{$b$} \pm \sqrt {b^2-4ac}}{2a}$  & $\longleftrightarrow$ 
      & $x=\frac{-b\framebox{$\pm$} \sqrt {b^2-4ac}}{2a}$  & $\longleftrightarrow$ 
      & $x=\frac{-b\pm\framebox{$\sqrt {b^2-4ac}$}}{2a}$  & $\longleftrightarrow$ 
      & $x=\frac{-b\pm\sqrt {\framebox{$b^2$}-4ac}}{2a}$\\
      $\longleftrightarrow$ 
      & $x=\frac{-b\pm\sqrt {\framebox{$b$}^2-4ac}}{2a}$  & $\longleftrightarrow$ 
      & $x=\frac{-b\pm\sqrt {b^{\framebox{$2$}}-4ac}}{2a}$  & $\longleftrightarrow$ 
      & $x=\frac{-b\pm\sqrt {b^2\framebox{$-$}4ac}}{2a}$  & $\longleftrightarrow$ 
      & $x=\frac{-b\pm\sqrt {b^2-\framebox{$4$}ac}}{2a}$  & $\longleftrightarrow$ 
      & $x=\frac{-b\pm\sqrt {b^2-4\framebox{$a$}c}}{2a}$\\
      $\longleftrightarrow$ 
      & $x=\frac{-b\pm\sqrt {b^2-4a\framebox{$c$}}}{2a}$  & $\longleftrightarrow$ 
      & $x=\frac{-b\pm\sqrt {b^2-4ac}}{\framebox{$2$}a}$  & $\longleftrightarrow$ 
      & $x=\frac{-b\pm\sqrt {b^2-4ac}}{2\framebox{$a$}}$
    \end{tabular}}
  \caption{Tree exploration of the quadratic formula.}
\label{fig:tree-exploration}
\end{figure*}


Mathematical formulas are generally of a complex nature, in fact, already a
small number of symbols can make for a complex utterance.  Consequently, just
listening to an expression once is generally not enough for a user to fully take
in its meaning.  Therefore for mathematical formulas it is particularly
important for users to be able to engage with the interactively by offering
means of traversing sub-expressions.  ChromeVox offers the facilities with its
concepts of granularity and walkers. However, as opposed to many other form of
content, such as regular text, mathematical formulas can be nested arbitrarily
deep, meaning that an expression can have sub-expressions of the same or higher
complexity. Consequently, the standard approach of having a standard set of
roughly ordered granularities that enable a user to descend into an expression
can not work for mathematical formulas. Instead we need specialist walkers and a
concept of nested granularity to allow for meaningful exploration. Therefore,
we have experimented with two different approaches walking MathML expressions:
\begin{enumerate}[(1)]
\item \emph{Tree exploration} that follows closely the tree structure of a MathML expression.
\item \emph{Level based exploration} that defines a granularity of
  sub-expressions and allows to dive into each of these separately.
\end{enumerate}
We now render those notions more precisely.

Let $T=(V,E)$ be a rooted tree with root $r\in V$ in the usual graph theoretic
sense (i.e., a directed acyclic graph, with all edges directed away from the
root and all child nodes having only one parent). 

Let $V=\{v_0=r,\ldots,v_n\}$ given in a preordering. We then define a
granularity $G=\{t_0,\ldots, t_n\}$, where $t_i$ is a sub-tree of $T$ with root
$v_i$, $i=0,\ldots,n$. Note that $t_0=T$. We then define \emph{tree exploration}
on $T$ as linearly walking on the elements of $G$, that is, walking forward
corresponds to shifting from $t_i$ to $t_{i+1}$, $i=0,\ldots,n-1$ and likewise
walking backwards to moving from $t_i$ to $t_{i-1}$, $i=1,\ldots, n$.

This effectively means that the granularity consists of every sub-tree of the
expression or in other words tree exploration corresponds to depth first
traversal of the sub-trees in $T$. Since we are exploring trees that are
elements of the DOM, the order of the vertices is naturally given by the
ordering of the nodes in the DOM.


\begin{figure*}[ht!]
  \centering
\tabcolsep2pt\small
\noindent\begin{tabular}{lclclclcll}
  \multicolumn{1}{c}{Level 0} &  & \multicolumn{1}{c}{Level 1} & & 
  \multicolumn{1}{c}{Level 2} & & \multicolumn{1}{c}{Level 3} & & 
  \multicolumn{1}{c}{Level 4}\\
$\framebox{$x=\frac{-b \pm \sqrt {b^2-4ac}}{2a}$}$  & $\longleftrightarrow$ 
& $\framebox{$x$}=\frac{-b \pm \sqrt {b^2-4ac}}{2a}$  &  \\
& & $x\framebox{$=$}\frac{-b \pm \sqrt {b^2-4ac}}{2a}$  &  \\
& & $x=\framebox{$\frac{-b \pm \sqrt {b^2-4ac}}{2a}$}$  & $\longleftrightarrow$ 
& $x=\frac{\framebox{$-b \pm \sqrt {b^2-4ac}$}}{2a}$  & $\longleftrightarrow$ 
& $x=\frac{\framebox{$-$}b \pm \sqrt {b^2-4ac}}{2a}$  \\
& & & & & & $x=\frac{-\framebox{$b$} \pm \sqrt {b^2-4ac}}{2a}$ \\
& & & & & & $x=\frac{-b\framebox{$\pm$} \sqrt {b^2-4ac}}{2a}$ \\
& & & & & & $x=\frac{-b\pm\framebox{$\sqrt {b^2-4ac}$} }{2a}$ & $\longleftrightarrow$ 
& $x=\frac{-b\pm\sqrt {\framebox{$b^2$}-4ac} }{2a}$ & $\longleftrightarrow\cdots$\\
& & & & & & & & $x=\frac{-b\pm\sqrt {b^2\framebox{$-$}4ac} }{2a}$\\[.2cm]\cline{7-7}
& & & & $x=\frac{-b \pm \sqrt {b^2-4ac}}{\framebox{$2a$}}$  & $\longleftrightarrow$ 
& $x=\frac{-b \pm \sqrt {b^2-4ac}}{\framebox{$2$}a}$ & & \multicolumn{1}{c}{\vdots}\\
& & & & & & $x=\frac{-b \pm \sqrt {b^2-4ac}}{2\framebox{$a$}}$ 
\end{tabular}
  \caption{Level exploration of the quadratic formula.}
\label{fig:level-exploration}
\end{figure*}

If we consider again our example of the quadratic formula, then the MathML tree
has the following form, where the topmost \texttt{math} tag is the root:

\begin{tikzpicture}[scale=.68, transform shape]
\node[draw] {math}
  %%[edge from parent fork down]
  [grow via three points={one child at (0,-1.25) and two children at (-1.3,-1.3) and (1.3,-1.3)}, edge from parent fork down]
    child {node[draw]{\begin{minipage}{3ex}\begin{center}mi\\\textcolor{black}{x}\end{center}\end{minipage}}}
    child {node[draw]{\begin{minipage}{3ex}\begin{center}mo\\\textcolor{black}{=}\end{center}\end{minipage}}}
    child {node[draw] {mfrac}[grow via three points={one child at (0,-1.5) and two children at (-1.5,-1.5) and (5.5,-1.5)}, edge from parent fork down]
      child {node[draw] {mrow}[grow via three points={one child at (0,-1.5) and two children at (-1,-1.5) and (1,-1.5)}, edge from parent fork down]
        child {node[draw]{\begin{minipage}{3ex}\begin{center}mo\\\textcolor{black}{-}\end{center}\end{minipage}}}
        child {node[draw]{\begin{minipage}{3ex}\begin{center}mi\\\textcolor{black}{b}\end{center}\end{minipage}}}
        child {node[draw]{\begin{minipage}{3ex}\begin{center}mo\\\textcolor{black}{$\pm$}\end{center}\end{minipage}}}
        child {node[draw] {msqrt}[grow via three points={one child at (0,-1.5) and two children at (-1,-1.5) and (1,-1.5)}, edge from parent fork down]
          child {node[draw] {msup}[grow via three points={one child at (0,-1.5) and two children at (-1,-1.5) and (1,-1.5)}, edge from parent fork down]
            child {node[draw]{\begin{minipage}{3ex}\begin{center}mi\\\textcolor{black}{b}\end{center}\end{minipage}}}
            child {node[draw]{\begin{minipage}{3ex}\begin{center}mn\\\textcolor{black}{2}\end{center}\end{minipage}}}
          }
          child {node[draw]{\begin{minipage}{3ex}\begin{center}mo\\\textcolor{black}{-}\end{center}\end{minipage}}}
          child {node[draw]{\begin{minipage}{3ex}\begin{center}mn\\\textcolor{black}{4}\end{center}\end{minipage}}}
          child {node[draw]{\begin{minipage}{3ex}\begin{center}mi\\\textcolor{black}{a}\end{center}\end{minipage}}}
          child {node[draw]{\begin{minipage}{3ex}\begin{center}mi\\\textcolor{black}{c}\end{center}\end{minipage}}}
        }
      }
      child {node[draw] {mrow}[grow via three points={one child at (0,-1.5) and two children at (-1,-1.5) and (.5,-1.5)}, edge from parent fork down]
        child {node[draw]{\begin{minipage}{3ex}\begin{center}mn\\\textcolor{black}{2}\end{center}\end{minipage}}}
        child {node[draw]{\begin{minipage}{3ex}\begin{center}mi\\\textcolor{black}{a}\end{center}\end{minipage}}}
      }
    }
    ;
\end{tikzpicture}

The single steps of the tree exploration of the above tree are given in
Fig.~\ref{fig:tree-exploration}.  The framed subexpressions correspond to the
sub-formulas that are being spoken in each step.  Notice that tree exploration
allows us to walk continuously walk from the root of the tree the rightmost leaf
node, without the need to explicitly change granularity.

Experimenting with tree exploration showed, that while it gave a pretty good
idea of the overall layout of a formula, it was not well suited to convey the
internal sub-structuring of many expressions. Consequently, we designed a second
exploration method that aims to offer tighter control on the exploration of
subexpressions.

As for tree exploration we let $V=\{v_0=r,\ldots,v_n\}$ given in a preordering
and the set of subtrees in $T$ as $S=\{t_0,\ldots, t_n\}$ equivalent to the $G$
in the previous definition. In addition, we define usual \emph{depth of a node}
in $V$, that is, $v_i$ is at depth $d$ if the path from $v_0$ to $v_i$ has $d$
edges. We now recursively define the granularities by level:
\begin{enumerate}[(i)]
\item Let $G_0=\{t_0\}$ be the granularity at level $0$.
\item Let $t\in G_\ell$. We define the granularity at level $\ell + 1$ as
  \arraycolsep1pt
  \begin{eqnarray*}
    G^t_{\ell+1} = \{s\in G & | & s \mbox{ is subtree of } t\mbox{ and }\\ 
    & & \mbox{root of } s \mbox{ is at depth } \ell+1\}.
  \end{eqnarray*}
\end{enumerate}
Observe that this definition means that granularities are defined relative to
sub-expressions, that is, the granularity $G^t_{\ell+1}$ are only the proper
subtrees of the level $\ell$ node. Consequently, there exists a level $\ell+1$
granularity for every vertex at depth $\ell$ that is not a leaf
node. Furthermore, when walking a $\ell+1$ level granularity, we can not leave
the common expression defined by the common parent node.

The level exploration for equation~(\ref{eq:quadratic}) is partially
displayed in~\ref{fig:level-exploration}, where framed subexpressions correspond
again to the sub-formulas that are spoken. Columns correspond to the different
levels of granularities and arrows between levels indicate which that the framed
subexpression can be explored at the next lower level. Exploration of
expressions at the same granularity corresponds to moving up and down in a
column. However, observe that the horizontal bar in level $3$ indicates the
boundary between two level $2$ granularities, where the entries above the bar
belong to $G^{-b\pm\sqrt{b^2-4ac}}_2$ and ones below to $G^{2a}_2$. Hence one
can not move from the enumerator to the denominator and if we wanted to explore
the subexpressions in the denominator (i.e., $2$ and $a$), we have to first move
back up to the second level, move to the expression $2a$ and can then explore
the next lower level.

Level exploration fits naturally into ChromeVox's paradigm of engaging with
content at different levels of granularities. As with regular text content the
user can explore an expression in two ways. They can move between expressions at
one level with up and down arrow keys, while exploring the currently active
sub-expression at the next lower level with the left and right arrow
keys. Furthermore, the usual key combinations to change granularities allow the
user to move up and down the different levels. These are announced explicitly to
give the reader a feel for the depth of an expression.  When a user tries to go
beyond the boundaries of an expression during exploration an earcon is
played. Similarly the earcon announces when the user tries to descend further
beyond the lowest level of a subexpression.

Interactive exploration is available for both math expressions given in MathML
syntax and rendered with MathJax. While in the case of the former we walk along
the tree structure defined precisely by the MathML tags, in the case of the
latter we walk the tree structure given by \texttt{span} nodes whose additional
class attribute mirrors the MathML tag. This has the advantage that in addition
to aurally render subexpressions, we can also make use of ChromeVox's visual
indicator --- a tool that allows users with low vision or reading disorders to
follow the flow of the text --- to highlight the subexpressions currently being
explored. Beyond exploring elements inside the DOM interactive exploration is
also possible for alternative representations that ChromeVox can use for math
expression and that are presented in the following section.

\section{Rerepresenting Maths Content}
\label{sec:alternative}

ChromeVox's ability to allow for alternative representations as discussed in
Sec.~\ref{sec:ax4} is crucial for both enlarging the amount mathematical content
available and the user experience when voicing that content. In fact, we have
developed initially in the context of math accessibility.  We employ the
mechanism in two ways:
\begin{enumerate}
\item As much of mathematics on the web is still only available as
  pre-rendered images as described in Sec.~\ref{sec:images}, we exploit any
  alternative markup we can find to internally replace the image representation
  thus making the expression accessible.
\item Since the direct translation of MathML expressions leads to speech output
  that is rather verbose and often differs quite significantly how a human
  reader would speak a formula, we have developed a more semantic interpretation
  of expressions that can be used as alternative structures.
\end{enumerate}

\subsection{Replacing Images}
\label{sec:images}

One major advancement for the accessibility of mathematics on the web is to make
hidden markup available to a screen reader, as much of the formulas on some of
the major sites providing mathematical content is still given in image format.
In ChromeVox we achieve this by explicitly for images of a particular classes.
For example, in Wikipedia \texttt{img} tags with the \texttt{class} attribute
\emph{tex} indicate that there is a math expression given as an image rendered
from a {\LaTeX} source that is given as string in the \texttt{alt} attribute.
Similarly, in MathWorld a number of different \texttt{class} attributes in
\texttt{img} tags indicate that there is AsciiMath in the \texttt{alt} attribute
that can be exploited.

Unfortunately, using markup like {\LaTeX} or AsciiMath directly in ChromeVox is
not easily feasible as ChromeVox is built to use the HTML DOM to generate speech
output. Moreover, adding another two of markup languages, would not only at
least triple the number of rules necessary for their speech translation thus
increasing maintenance effort, but would also make it very difficult to achieve
consistency between aural rendering of same formula given in different markup
languages.

We have therefore decided to translate all hidden markup into MathML allowing us
to utilise all the facilities we have built for it already. In order not to
duplicate efforts by writing our own translation engine as well as to ensure
further consistency between translated hidden markup and the same markup
rendered visually with MathJax, we are using MathJax for the translation of
hidden markup by employing it effectively as a web service.

Technically this is realised by implementing a bridge to MathJax from within the
content of the webpage. We inject a MathJax configuration script into the
webpage's content to allow ChromeVox to call MathJax remotely. For each of the
math images we have identified we send the hidden markup (i.e., either {\LaTeX}
or AsciiMath) to MathJax to obtain a corresponding MathML representation. The
MathML is computed upon loading of a webpage and stored to be available as soon
as the screen reader encounters an image with a math formula. If stored MathML
markup exists, it is automatically retrieved and send to the speech rule engine
to generate the audio description. Note that this will not change the actual
image node in the DOM.

For example, when loading the Wikipedia page on the quadratic formula, ChromeVox
will detect the markup given in Fig.~\ref{fig:quadratic-img}, find the hidden
{\LaTeX} markup and send it to MathJax for translation, resulting in the MathML
expression given in Fig.~\ref{fig:quadratic-mml}. The latter is then actually
passed to the speech rule engine whenever the screenreader encounters the
original \texttt{img} node.

In addition to translating the MathML markup for the entire expression,
ChromeVox also enables the interactive exploration of the expression as
described in Sec.~\ref{sec:explore}, as if the node were an element of the
DOM. The only difference is that the visual indicator that highlights
subexpression, when they are traversed, can not do the same as only the image is
contained in the webpage.


\subsection{Semantic Representations}
\label{sec:semantic}

\begin{itemize}
\item More sophisticated representation
\item Internal representation.
\item Has to be triggered explicitly by the user
\end{itemize}
Example: 

\begin{tikzpicture}[scale=.68, transform shape]
  \node[draw] {=}
  [grow via three points={one child at (0,-1.25) and two children at (-1.3,-1.3) and (1.3,-1.3)}, edge from parent fork down]
  
    child {node[draw] {/}[grow via three points={one child at (0,-1.5) and two children at (-1.5,-1.5) and (5.5,-1.5)}, edge from parent fork down]
     child {node[draw] {$\pm$}[grow via three points={one child at (0,-1.5) and two children at (-1,-1.5) and (3,-1.5)}, edge from parent fork down]
       child {node[draw] {-}[grow via three points={one child at (0,-1.5) and two children at (-1,-1.5) and (1,-1.5)}, edge from parent fork down]
         child {node[draw]{b}}}
      child {node[draw] {sqrt}[grow via three points={one child at (0,-1.5) and two children at (-1,-1.5) and (1,-1.5)}, edge from parent fork down]
        child {node[draw] {-}[grow via three points={one child at (0,-1.5) and two children at (-2,-1.5) and (2,-1.5)}, edge from parent fork down]
           child {node[draw] {$\,\widehat{}\,$}[grow via three points={one child at (0,-1.5) and two children at (-1,-1.5) and (1,-1.5)}, edge from parent fork down]
             child {node[draw]{b}}
            child {node[draw]{2}}}
          child {node[draw] {$\cdot$}[grow via three points={one child at (0,-1.5) and two children at (-1,-1.5) and (1,-1.5)}, edge from parent fork down]
            child {node[draw]{4}}
            child {node[draw]{a}}
            child {node[draw]{c}}
  	}
  }
  }
  }
   child {node[draw] {$\cdot$}[grow via three points={one child at (0,-1.5) and two children at (-1,-1.5) and (1,-1.5)}, edge from parent fork down]
     child {node[draw]{2}}
     child {node[draw]{a}}
    }
  }
  ;
\end{tikzpicture}

\section{Conclusions}
\label{sec:conc}


\bibliographystyle{plain} \bibliography{www_2014}

\end{document}
